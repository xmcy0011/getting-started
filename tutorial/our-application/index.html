<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=description content="Getting Started with Docker"><meta name=author content=Docker><meta name=lang:clipboard.copy content="Copy to clipboard"><meta name=lang:clipboard.copied content="Copied to clipboard"><meta name=lang:search.language content=en><meta name=lang:search.pipeline.stopwords content=True><meta name=lang:search.pipeline.trimmer content=True><meta name=lang:search.result.none content="No matching documents"><meta name=lang:search.result.one content="1 matching document"><meta name=lang:search.result.other content="# matching documents"><meta name=lang:search.tokenizer content=[\s\-]+><link rel="shortcut icon" href=../../assets/images/favicon.png><meta name=generator content="mkdocs-1.2.3, mkdocs-material-4.6.3"><title>示例程序 - Getting Started</title><link rel=stylesheet href=../../assets/stylesheets/application.adb8469c.css><link rel=stylesheet href=../../assets/stylesheets/application-palette.a8b3c06d.css><meta name=theme-color content=#2196f3><script src=../../assets/javascripts/modernizr.86422ebf.js></script><link href=https://fonts.gstatic.com rel=preconnect crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback"><style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style><link rel=stylesheet href=../../assets/fonts/material-icons.css><link rel=stylesheet href=../../css/styles.css><link rel=stylesheet href=../../css/dark-mode.css></head> <body dir=ltr data-md-color-primary=blue data-md-color-accent=blue> <svg class=md-svg> <defs> <svg xmlns=http://www.w3.org/2000/svg width=416 height=448 viewbox="0 0 416 448" id=__github><path fill=currentColor d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg> </defs> </svg> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay data-md-component=overlay for=__drawer></label> <a href=#_1 tabindex=0 class=md-skip> Skip to content </a> <header class=md-header data-md-component=header> <nav class="md-header-nav md-grid"> <div class=md-flex> <div class="md-flex__cell md-flex__cell--shrink"> <a href=../.. title="Getting Started" aria-label="Getting Started" class="md-header-nav__button md-logo"> <img alt=logo src=../../images/docker-labs-logo.svg width=24 height=24> </a> </div> <div class="md-flex__cell md-flex__cell--shrink"> <label class="md-icon md-icon--menu md-header-nav__button" for=__drawer></label> </div> <div class="md-flex__cell md-flex__cell--stretch"> <div class="md-flex__ellipsis md-header-nav__title" data-md-component=title> <span class=md-header-nav__topic> Getting Started </span> <span class=md-header-nav__topic> 示例程序 </span> </div> </div> <div class="md-flex__cell md-flex__cell--shrink"> <label class="md-icon md-icon--search md-header-nav__button" for=__search></label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input aria-label=search name=query placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=query data-md-state=active> <label class="md-icon md-search__icon" for=__search></label> <button type=reset class="md-icon md-search__icon" data-md-component=reset tabindex=-1> &#xE5CD; </button> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=result> <div class=md-search-result__meta> Type to start searching </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> </div> <div class="md-flex__cell md-flex__cell--shrink"> <div class=md-header-nav__source> <a href=https://github.com/xmcy0011/getting-started title="Go to repository" class=md-source data-md-source=github> <div class=md-source__icon> <svg viewbox="0 0 24 24" width=24 height=24> <use xlink:href=#__github width=24 height=24></use> </svg> </div> <div class=md-source__repository> docker/getting-started </div> </a> </div> </div> </div> </nav> </header> <div class=md-container> <main class=md-main role=main> <div class="md-main__inner md-grid" data-md-component=container> <div class="md-sidebar md-sidebar--primary" data-md-component=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" data-md-level=0> <label class="md-nav__title md-nav__title--site" for=__drawer> <a href=../.. title="Getting Started" class="md-nav__button md-logo"> <img alt=logo src=../../images/docker-labs-logo.svg width=48 height=48> </a> Getting Started </label> <div class=md-nav__source> <a href=https://github.com/xmcy0011/getting-started title="Go to repository" class=md-source data-md-source=github> <div class=md-source__icon> <svg viewbox="0 0 24 24" width=24 height=24> <use xlink:href=#__github width=24 height=24></use> </svg> </div> <div class=md-source__repository> docker/getting-started </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../ title=开始 class=md-nav__link> 开始 </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-toggle md-nav__toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> 示例程序 </label> <a href=./ title=示例程序 class="md-nav__link md-nav__link--active"> 示例程序 </a> <nav class="md-nav md-nav--secondary"> <label class=md-nav__title for=__toc>Table of contents</label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#_1 class=md-nav__link> 下载应用 </a> </li> <li class=md-nav__item> <a href=#_2 class=md-nav__link> 构建容器映像 </a> </li> <li class=md-nav__item> <a href=#_3 class=md-nav__link> 启动容器 </a> </li> <li class=md-nav__item> <a href=#_4 class=md-nav__link> 总结 </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../updating-our-app/ title=更新镜像 class=md-nav__link> 更新镜像 </a> </li> <li class=md-nav__item> <a href=../sharing-our-app/ title=上传镜像 class=md-nav__link> 上传镜像 </a> </li> <li class=md-nav__item> <a href=../persisting-our-data/ title=持久化DB class=md-nav__link> 持久化DB </a> </li> <li class=md-nav__item> <a href=../using-bind-mounts/ title=绑定挂载 class=md-nav__link> 绑定挂载 </a> </li> <li class=md-nav__item> <a href=../multi-container-apps/ title=多容器应用 class=md-nav__link> 多容器应用 </a> </li> <li class=md-nav__item> <a href=../using-docker-compose/ title="使用Docker Compose" class=md-nav__link> 使用Docker Compose </a> </li> <li class=md-nav__item> <a href=../image-building-best-practices/ title=构建镜像最佳实践 class=md-nav__link> 构建镜像最佳实践 </a> </li> <li class=md-nav__item> <a href=../what-next/ title=接下来? class=md-nav__link> 接下来? </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary"> <label class=md-nav__title for=__toc>Table of contents</label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#_1 class=md-nav__link> 下载应用 </a> </li> <li class=md-nav__item> <a href=#_2 class=md-nav__link> 构建容器映像 </a> </li> <li class=md-nav__item> <a href=#_3 class=md-nav__link> 启动容器 </a> </li> <li class=md-nav__item> <a href=#_4 class=md-nav__link> 总结 </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content> <article class="md-content__inner md-typeset"> <h1>示例程序</h1> <!-- For the rest of this tutorial, we will be working with a simple todo
list manager that is running in Node.js. If you're not familiar with Node.js,
don't worry! No real JavaScript experience is needed! --> <p>在本教程的其余部分，我们将使用在Node.js中运行的简单的待办事项应用。如果您不熟悉Node.js，别担心！不需要真正的JavaScript开发经验！</p> <!-- At this point, your development team is quite small and you're simply
building an app to prove out your MVP (minimum viable product). You want
to show how it works and what it's capable of doing without needing to
think about how it will work for a large team, multiple developers, etc. --> <p>您的开发团队相当小，您只是构建一个应用程序来证明您的MVP（最低可行产品）。你想要展示它是如何工作的，以及它不需要做什么，并思考它如何被大型团队、多个开发人员等使用。</p> <p><img alt="Todo List Manager Screenshot" src=todo-list-sample.png></p> <!-- ## Getting our App --> <h2 id=_1>下载应用<a class=headerlink href=#_1 title="Permanent link">&para;</a></h2> <!-- Before we can run the application, we need to get the application source code onto 
our machine. For real projects, you will typically clone the repo. But, for this tutorial,
we have created a ZIP file containing the application. --> <p>在我们运行应用程序之前，我们需要将应用程序源代码放在我们的机器上。在实际项目中，您通常使用git clone来获取源码。但是，对于本教程，为了方便你体验，我们则创建了一个包含该应用程序的ZIP文件。</p> <!-- 1. [Download the ZIP](/assets/app.zip). Open the ZIP file and make sure you extract the contents. --> <ol> <li><a href=/assets/app.zip>下载压缩包</a>，然后找一个合适的目录解压。</li> <li>然后使用您最喜欢的代码编辑器打开项目（比如使用Visual Studio Code），你应该会看到一个 <code>package.json</code> 文件和2个目录（<code>src</code> and <code>spec</code>）.</li> </ol> <!-- 1. Once extracted, use your favorite code editor to open the project. If you're in need of
    an editor, you can use [Visual Studio Code](https://code.visualstudio.com/). You should
    see the `package.json` and two subdirectories (`src` and `spec`). --> <p class=text-center><img alt="Screenshot of Visual Studio Code opened with the app loaded" src=ide-screenshot.png style=width:650px;margin-top:20px;></p> <!-- ## Building the App's Container Image --> <h2 id=_2>构建容器映像<a class=headerlink href=#_2 title="Permanent link">&para;</a></h2> <!-- In order to build the application, we need to use a `Dockerfile`. A
Dockerfile is simply a text-based script of instructions that is used to
create a container image. If you've created Dockerfiles before, you might see a few flaws in the Dockerfile below. But, don't worry! We'll go over them. --> <p>为了构建应用程序镜像，我们需要使用<code>Dockerfile</code>。Dockerfile只是一个基于文本的指令脚本，用于创建容器镜像。如果您以前创建过Dockerfile，您可能会在下面的Docker文件中看到一些缺陷。但是，别担心！我们后续会介绍的。</p> <!-- 1. Create a file named `Dockerfile` in the same folder as the file `package.json` with the following contents. --> <ol> <li> <p>在与<code>package.json</code>相同的文件夹中创建一个名为<code>Dockerfile</code>的文件，其中包含以下内容：</p> <div class=highlight><pre><span></span><code><span class=k>FROM</span> <span class=s>node:12-alpine</span>
<span class=c>#译者注，这一句可能会导致报错，可以去掉，没有影响</span>
<span class=c>#RUN apk add --no-cache python g++ make</span>
<span class=k>WORKDIR</span><span class=s> /app</span>
<span class=k>COPY</span> . .
<span class=k>RUN</span> yarn install --production
<span class=k>CMD</span> <span class=p>[</span><span class=s2>&quot;node&quot;</span><span class=p>,</span> <span class=s2>&quot;src/index.js&quot;</span><span class=p>]</span>
</code></pre></div> <!-- Please check that the file <code>Dockerfile</code> has no file extension like <code>.txt</code>. Some editors may append this file extension automatically and this would result in an error in the next step. --> <div class="admonition info"> <p class=admonition-title>Info</p> <p>请检查Dockerfile文件是否有像.txt这样的文件扩展名。一些编辑器可能会自动附加此文件扩展名，这会导致下一步执行失败。</p> </div> </li> <li> <p>请打开终端，并转到Dockerfile所在<code>APP</code>目录，然后使用<code>docker build</code>命令构建容器映像。 <div class=highlight><pre><span></span><code>docker build -t getting-started .
</code></pre></div> <!-- 2. If you haven't already done so, open a terminal and go to the <code>app</code> directory with the <code>Dockerfile</code>. Now build the container image using the <code>docker build</code> command. --></p> <p><!-- This command used the Dockerfile to build a new container image. You might
have noticed that a lot of "layers" were downloaded. This is because we instructed
the builder that we wanted to start from the <code>node:12-alpine</code> image. But, since we
didn't have that on our machine, that image needed to be downloaded. --> 此命令使用Dockerfile构建新的容器镜像。你可能注意到下载了很多“层”。这是因为我们想从 <code>node:12-alpine</code> 开始构建，但本机上不存在，所以我们需要先下载那个镜像。</p> <p><!-- After the image was downloaded, we copied in our application and used <code>yarn</code> to 
install our application's dependencies. The <code>CMD</code> directive specifies the default 
command to run when starting a container from this image. --> 当下载基础镜像完成后，开始复制我们的应用程序，然后使用 <code>yarn</code> 安装我们应用程序的依赖项。<code>CMD</code>指令只有在我们启动容器时会被执行，编辑镜像时则不会。</p> <p><!-- Finally, the <code>-t</code> flag tags our image. Think of this simply as a human-readable name
for the final image. Since we named the image <code>getting-started</code>, we can refer to that
image when we run a container. --> 最后，使用 <code>-t</code> 标志给我们的镜像打一个标签，名字可以是任意的，但最好起一个人类可以看懂的名字。由于我们给镜像命名为getting-started，所以，当我们运行容器后能够看到它。</p> <p><!-- The <code>.</code> at the end of the <code>docker build</code> command tells that Docker should look for the <code>Dockerfile</code> in the current directory. --> <code>docker build</code> 命令末尾的 <code>.</code> 告诉Docker应当在当前目录中查找<code>Dockerfile</code>。</p> </li> </ol> <!-- ## Starting an App Container --> <h2 id=_3>启动容器<a class=headerlink href=#_3 title="Permanent link">&para;</a></h2> <!-- Now that we have an image, let's run the application! To do so, we will use the `docker run`
command (remember that from earlier?). --> <p>现在，我们有了一个容器镜像，接下来，让我们来运行一下试试！我们将使用<code>docker run</code>命令（还记得吗？）。</p> <ol> <li> <p>使用 <code>docker run</code> 命令启动容器，并指定我们刚刚创建的镜像： <div class=highlight><pre><span></span><code>docker run -dp <span class=m>3000</span>:3000 getting-started
</code></pre></div></p> <p>还记得 <code>-d</code> 和 <code>-p</code> 标志吗？我们正在以“分离”模式运行新容器，并在主机的端口3000与容器的端口3000之间创建映射。没有端口映射，我们将无法访问应用程序。</p> </li> <li> <p class=text-center>几秒钟后，打开网页浏览器<a href=http://localhost:3000>http://localhost:3000</a>。您应该会看到我们的应用程序！ <img alt="Empty Todo List" src=todo-list-empty.png style=width:450px;margin-top:20px;></p> </li> <li> <p>您可以添加一两个代办事项试一试，看看它是否能添加成功，然后试一试把它标记为完成或者删除。如果一切顺利，则证明您的代办事项已经成功存储在后端！相当快和容易，是吧？</p> </li> </ol> <!-- At this point, you should have a running todo list manager with a few items, all built by you!
Now, let's make a few changes and learn about managing our containers. --> <p>此时，您应该有一个运行的待办事项列表，其中包含一些由您构建的代办事项！</p> <p>现在，让我们做一些更改，并学习如何管理我们的容器。</p> <!-- If you take a quick look at the Docker Dashboard, you should see your two containers running now 
(this tutorial and your freshly launched app container)! --> <p>如果您快速查看Docker仪表板，您应该会看到您的两个容器现在在运行（本教程和您新推出的应用程序容器）！</p> <p><img alt="Docker Dashboard with tutorial and app containers running" src=dashboard-two-containers.png></p> <!-- ## Recap --> <h2 id=_4>总结<a class=headerlink href=#_4 title="Permanent link">&para;</a></h2> <!-- In this short section, we learned the very basics about building a container image and created a
Dockerfile to do so. Once we built an image, we started the container and saw the running app! --> <p>在这个简短的部分中，我们学习了构建镜像的基础知识。</p> <p>并且通过创建Dockerfile构建了我们的应用容器镜像，我们启动了容器，并看到了正在运行的应用程序！</p> <!-- Next, we're going to make a modification to our app and learn how to update our running application
with a new image. Along the way, we'll learn a few other useful commands. --> <p>接下来，我们将修改我们的应用程序，并了解如何通过新的镜像更新我们正在运行的容器。在此过程中，我们将学习其他一些有用的命令。</p> </article> </div> </div> </main> <footer class=md-footer> <div class=md-footer-nav> <nav class="md-footer-nav__inner md-grid"> <a href=../ title=开始 class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel=prev> <div class="md-flex__cell md-flex__cell--shrink"> <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i> </div> <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title"> <span class=md-flex__ellipsis> <span class=md-footer-nav__direction> Previous </span> 开始 </span> </div> </a> <a href=../updating-our-app/ title=更新镜像 class="md-flex md-footer-nav__link md-footer-nav__link--next" rel=next> <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title"> <span class=md-flex__ellipsis> <span class=md-footer-nav__direction> Next </span> 更新镜像 </span> </div> <div class="md-flex__cell md-flex__cell--shrink"> <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i> </div> </a> </nav> </div> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-copyright> <div class=md-footer-copyright__highlight> Copyright &copy; 2020 Docker </div> powered by <a href=https://www.mkdocs.org target=_blank rel=noopener>MkDocs</a> and <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs</a> </div> <div class=md-footer-social> <link rel=stylesheet href=../../assets/fonts/font-awesome.css> <a href=https://github.com/xmcy0011/getting-started target=_blank rel=noopener title=github-alt class="md-footer-social__link fa fa-github-alt"></a> </div> </div> </div> </footer> </div> <script src=../../assets/javascripts/application.c33a9706.js></script> <script>app.initialize({version:"1.2.3",url:{base:"../.."}})</script> </body> </html>